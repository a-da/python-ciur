{
    "name": "unibank",
    "test_url" : "http://www.unibank.md/individuals/crediting",
    "version": 1,
    "versions": [{
        "version" : 1,
        "timestamp" : 1332498235,
        "config" : {
            "xpath" : {
                "root" : "//html:html/html:body//html:div[@id='exchange']",
                "namespaces" : {
                    "html": "http://www.w3.org/1999/xhtml"
                }
            },
            "anomaly" : {
                "root" : "//html:html/html:body",
                "namespaces" : { }
            }
        },
        "anomaly" : {},
        "light_handlers" : {
            "^html:" : {},
            "^date:" : ["%d.%m.%Y"]
        },
        "rules" : {
            "date" : [ "text.|^date:|mandatory", ".//html:div[@class='date']"],
            "items_top" : [ "mandatory", ".//html:div[@class='currency-block'][1]/html:table", {
                "eur" : ["mandatory", ".//html:td[text()='EUR' and @class='first']/..", "=>buy_sell"],
                "usd" : ["mandatory", ".//html:td[text()='USD' and @class='first']/..", "=>buy_sell"]
            }],
            "items_other" : [ "mandatory", ".//html:div[@class='currency-block'][1]/html:div//html:table", {
                "ron" : ["mandatory", ".//html:td[text()='RON' and @class='first']/..", "=>buy_sell"],
                "rub" : ["mandatory", ".//html:td[text()='RUB' and @class='first']/..", "=>buy_sell"],
                "uah" : ["mandatory", ".//html:td[text()='UAH' and @class='first']/..", "=>buy_sell"]
            }]
        },
        "blocks" : {
            "buy_sell" : {
                "buy"  : ["float.|mandatory", "./html:td[2]"],
                "sell" : ["float.|mandatory", "./html:td[3]"]
            }
        },
        "reformat" : [
            {
                "update" : ["items_top", "items_other"]
            },
            {
                "rename" : ["items_top", "items"]
            },
            {
                "delete" : ["items_other"]
            }
        ]
    }]
}

