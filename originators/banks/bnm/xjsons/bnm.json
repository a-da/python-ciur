{
    "name": "bnm",
    "test_url" : "http://bnm.md/md/official_exchange_rates",
    "version": 2,
    "versions": [{
        "version" : 1,
        "timestamp" : 1332498235,
        "config" : {
            "xpath" : {
                "root" : "//html:html/html:body//html:table[@id='of_ex_rates_header']",
                "namespaces" : {
                    "html": "http://www.w3.org/1999/xhtml"
                }
            },
            "anomaly" : {
                "root" : "//html:html/html:body",
                "namespaces" : { }
            }
        },
        "anomaly" : {},
        "light_handlers" : {
            "^html:" : {},
            "^drain:date" : {
                "re" : "(\\d{2}\\.\\d{2}\\.\\d{4})",
                "group" : 1
            }
        },
        "rules" : {
            "date" : ["text.|^drain:date|mandatory", "./preceding-sibling::html:p"],
            "items" : ["mandatory", ".", {
                "czk" : ["mandatory", ".//html:td[text()='CZK']/..", "=>common"],
                "dkk" : ["mandatory", ".//html:td[text()='DKK']/..", "=>common"],
                "isk" : ["mandatory", ".//html:td[text()='ISK']/..", "=>common"],
                "nok" : ["mandatory", ".//html:td[text()='NOK']/..", "=>common"],
                "sek" : ["mandatory", ".//html:td[text()='SEK']/..", "=>common"],
                "xdr" : ["mandatory", ".//html:td[text()='XDR']/..", "=>common"],
                "mkd" : ["mandatory", ".//html:td[text()='MKD']/..", "=>common"],
                "kwd" : ["mandatory", ".//html:td[text()='KWD']/..", "=>common"],
                "rsd" : ["mandatory", ".//html:td[text()='RSD']/..", "=>common"],
                "aed" : ["mandatory", ".//html:td[text()='AED']/..", "=>common"],
                "hkd" : ["mandatory", ".//html:td[text()='HKD']/..", "=>common"],
                "usd" : ["mandatory", ".//html:td[text()='USD']/..", "=>common"],
                "aud" : ["mandatory", ".//html:td[text()='AUD']/..", "=>common"],
                "cad" : ["mandatory", ".//html:td[text()='CAD']/..", "=>common"],
                "nzd" : ["mandatory", ".//html:td[text()='NZD']/..", "=>common"],
                "amd" : ["mandatory", ".//html:td[text()='AMD']/..", "=>common"],
                "eur" : ["mandatory", ".//html:td[text()='EUR']/..", "=>common"],
                "huf" : ["mandatory", ".//html:td[text()='HUF']/..", "=>common"],
                "chf" : ["mandatory", ".//html:td[text()='CHF']/..", "=>common"],
                "uah" : ["mandatory", ".//html:td[text()='UAH']/..", "=>common"],
                "hrk" : ["mandatory", ".//html:td[text()='HRK']/..", "=>common"],
                "gel" : ["mandatory", ".//html:td[text()='GEL']/..", "=>common"],
                "lvl" : ["mandatory", ".//html:td[text()='LVL']/..", "=>common"],
                "all" : ["mandatory", ".//html:td[text()='ALL']/..", "=>common"],
                "ron" : ["mandatory", ".//html:td[text()='RON']/..", "=>common"],
                "bgn" : ["mandatory", ".//html:td[text()='BGN']/..", "=>common"],
                "gbg" : ["mandatory", ".//html:td[text()='GBP']/..", "=>common"],
                "try" : ["mandatory", ".//html:td[text()='TRY']/..", "=>common"],
                "ltl" : ["mandatory", ".//html:td[text()='LTL']/..", "=>common"],
                "azn" : ["mandatory", ".//html:td[text()='AZN']/..", "=>common"],
                "tmt" : ["mandatory", ".//html:td[text()='TMT']/..", "=>common"],
                "myr" : ["mandatory", ".//html:td[text()='MYR']/..", "=>common"],
                "byr" : ["mandatory", ".//html:td[text()='BYR']/..", "=>common"],
                "rub" : ["mandatory", ".//html:td[text()='RUB']/..", "=>common"],
                "inr" : ["mandatory", ".//html:td[text()='INR']/..", "=>common"],
                "ils" : ["mandatory", ".//html:td[text()='ILS']/..", "=>common"],
                "kgs" : ["mandatory", ".//html:td[text()='KGS']/..", "=>common"],
                "tjs" : ["mandatory", ".//html:td[text()='TJS']/..", "=>common"],
                "uzs" : ["mandatory", ".//html:td[text()='UZS']/..", "=>common"],
                "kzt" : ["mandatory", ".//html:td[text()='KZT']/..", "=>common"],
                "krw" : ["mandatory", ".//html:td[text()='KRW']/..", "=>common"],
                "jpy" : ["mandatory", ".//html:td[text()='JPY']/..", "=>common"],
                "cny" : ["mandatory", ".//html:td[text()='CNY']/..", "=>common"],
                "pln" : ["mandatory", ".//html:td[text()='PLN']/..", "=>common"]
            }]
        },
        "reformat" : [],
        "blocks" : {
            "common" : {
                "name"   : ["text.|mandatory", "./html:td[1]"],
                "cod"    : ["text.|mandatory", "./html:td[2]"],
                "abr"    : ["text.|mandatory", "./html:td[3]"],
                "value"  : ["int.|mandatory", "./html:td[4]"]
            }
        }
    },
        {
            "version" : 2,
            "timestamp" : 1350978890,
            "config" : {
                "xpath" : {
                    "root" : "//html:html/html:body//html:table[@id='of_ex_rates_header']",
                    "namespaces" : {
                        "html": "http://www.w3.org/1999/xhtml"
                    }
                },
                "anomaly" : {
                    "root" : "//html:html/html:body",
                    "namespaces" : { }
                }
            },
            "anomaly" : {},
            "light_handlers" : {
                "^html:" : {},
                "^drain:date" : {
                    "re" : "(\\d{2}\\.\\d{2}\\.\\d{4})",
                    "group" : 1
                },
                "^date:" : ["%d.%m.%Y"]
            },
            "rules" : {
                "date" : ["text.|^drain:date|^date:|mandatory", "./preceding-sibling::html:p"],
                "items" : ["mandatory", ".", {
                    "*" : ["mandatory", {
                        "for" : [
                            "CZK", "DKK", "ISK", "NOK", "SEK", "XDR", "MKD", "KWD", "RSD", "AED", "HKD",
                            "USD", "AUD", "CAD", "NZD", "AMD", "EUR", "HUF", "CHF", "UAH", "HRK", "GEL",
                            "LVL", "ALL", "RON", "BGN", "GBP", "TRY", "LTL", "AZN", "TMT", "MYR", "BYR",
                            "RUB", "INR", "ILS", "KGS", "TJS", "UZS", "KZT", "KRW", "JPY", "CNY", "PLN"
                        ],
                        "in" : ".//html:td[text()='%s']/.."
                    }, "=>common"]
                }]
            },
            "blocks" : {
                "common" : {
                    "name"   : ["text.|mandatory", "./html:td[1]"],
                    "cod"    : ["text.|mandatory", "./html:td[2]"],
                    "abr"    : ["text.|mandatory", "./html:td[3]"],
                    "rate"   : ["int.|mandatory", "./html:td[4]"],
                    "value"  : ["float.|mandatory", "./html:td[5]"]
                }
            },
            "reformat" : []
        }]
}

